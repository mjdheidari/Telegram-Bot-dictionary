<div dir="rtl">
 
 
# ربات تلگرامی برای ترجمه لغات فارسی به انگیلیسی 

این ربات با زبان PHP نوشته شده و برای ترجمه از موتور جستوجوی یاندکس استفاده کردم.

## نحوه استفاده

پیش از هر کاری باید یه ربات توی تلگرام ایجاد کنید.
هر ربات توی تلگرام یک توکن منحصر به فرد و یونیک داره و شما باید با استفاده از همین توکن آپدیت ها ی ربات رو دریافت کنید و همچنین پیاما هاتون رو به ربات ارسال کنید.

نمونه یک توکن ربات

```
1018468566:AAEAsHjrxsgreECgUN565N1MknLsKUTSDg8cnbg
```

## ساخت ربات تلگرامی

برای ساخت ربات تلگرامی باید ازطریق ربات بات فادر خود تلگرام اقدام کنید.
این ربات یکی از ربات های رسمی تلگرام هست.
آدرس ربات بات فادر : 

```
@BotFather
```

بعد از اینکه رباتتون رو از طریق بات فادر درست کردید، بات‌فادر خودش توکن ربات رو دراختیارتون میزاره.

## تنظیم کردن وب‌هوک

بعد از دریافت توکن باید عملیات SET WEBHOOK رو انجام بدید.
برای ست کردن وب هوک باید توی هاستتون یه فایل php درست کنید و به تلگرام بگید وقتی پیامی برای ربات ارسال شد، از دستورات فایل php پیروی کنه.

من توی پوشه public_html خودم فایل index.php رو درست کردم.
و برای انجام ست وبهوک باید لینک زیر رو در مرورگرم باز کنم.

```
http://api.telegram.org/bot000/setwebhook?url=https://your-url.com/index.php
```
توجه کنید بعد از  bot  و به جای 000  باید توکن رباتتون رو وارد کنید
و به جای your-url.com باید ادرس دامین خودتون رو وارد کنید.
 درواقع شما نهایتا باید لینکی مشابه لینک زیر داشته باشید
 
 ```
 https://api.telegram.org/bot1018468566:AAEAsekegr56dECgUNsrN1MknLsKUTSDg8cnbg/setwebhook?url=https://mjdheidari.com/index.php
 ```

بعدش باید پیغامی بصورت یه ارایه جیسون مشابه زیر دریافت کنید:

```
ok	true
result	true
description	Webhook was set
```

تبریک میگم شما تونستید رباتتون رو با موفقیت به هاست خودتون مرتبط کنید.
حالا باید بریم مرحله بعدی یعنی ویرایش فایل های functions و index


## دریافت api key رایگان برای ترجمه لغات از موتور جستوجوی یاندکس

برای گرفتن یه api ساده و بی دردسر میتونید از موتور جستوجوی یاندکس استفاده کنید.
اگر هم حوصله دارید میتونید از api گوگل یا سرویس های مشابهش استفاده کنید   :)

برای دریافت api یاندکس میتونید از لینک زیر استفاده کنید.

* https://translate.yandex.com/developers/keys

توجه کنید api key ای که از یاندکس دریافت میکنید باید چیزی مشابه این باشه:

```
trnsl.1.1.20200307T105809Z.00b5d7ce3745b352f.62c71633a3e23d9d43657876e44f8d8950f0200a7
```
در حین گرفتن api باید مشخص کنید که زبان مبدا و مقصد چیه.

ینی باید مشخص کنید که میخوایید از زبان فارسی به انگیلیسی یا برعکس ترجمه انجام بشه.

## شخصی سازی فایل functions.php

داخل فایل functions.php و در خط  سوم باید توکن رباتتون رو وارد کنید در خط 12 باید api key ای که از یاندکس گرفتید رو وارد کنید.

### خط 3:

لاین 3 باید مشابه این باشه:

```
$curl = curl_init('https://api.telegram.org/bot101846568566:AAEAsHjrxekeECgUNN1MknLsKUTSDg8cnbg/'.$method);
```
همونطور که قبلا گفتم باید بعد از bot توکن ربات خودتون رو وارد کنید.

### خط 12

خط 12 هم باید مشابه این باشه:


```
$url = "https://translate.yandex.net/api/v1.5/tr.json/translate?lang=fa-en&key=trnsl.1.1.20200307T1058565609Z.00b5d7ce3745b32f.62c7133a3e23d9d48657876e44f8d8950f0200a7&text=".$text;
```


توی دستور بالایی باید بعد از key= اون api key مخصوص خودتون رو بنویسید که از یاندکس گرفتید.

دقت کنید چون من میخواستم ترجمه رباتم به صورت فارسی به انگیلیسی باشه بعد از lang= عبارت fa-en رو نوشتم؛ یعنی فارسی به انگیلیسی.
این قسمت رو هم باید متناسب با نیازتون تغییر بدید.

کار ما با  فایل functions.php تموم شده و میریم سراغ فایل index.php


## شخصی سازی فایل index.php

توی این فایل فقط کافیه توی لاین 35 بجای token، توکن رباتتون رو که از بات فادر گرفتید جایگزین کنید.

نهایتا لاین 35 شما به مشابه این خواهد بود:

```
$url= "https://api.telegram.org/bot" . "10185566457866:AAEAsHjrxekeECgUNN1MknLsKUTSDg8cnbg" . "/answerInlineQuery?inline_query_id={$queryId}&results=" . json_encode($mResult);
```

تمام تغییرات لازم رو براتون توضیح دادم. امیدوارم چیزی رو از قلم ننداخته باشم.

اگر هم چیزی رو فراموش کرده بودم که بگم لطفا توی ایشوز ها ها مطرح کنید.

و یا مستقیم مشکلتون رو با من درمیان بذارید :))))

mjdheidari.ir
</div>
